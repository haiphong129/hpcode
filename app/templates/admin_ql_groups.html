{% extends "base.html" %}
{% set  subtitle= "Quản lý nhóm" %}
{% block content %}
    {% if status %}
        <p class="error text-center text-danger">{{ status|safe }}</p>
    {% endif %}
    <hr class="m-0 p-0">    
    <form method="post" action="{{url_for('admin_add_group') }}">
        <div class="row pt-1 pb-1 justify-content-center align-items-center" >
            <div class="col-sm-8">
            <div class="input-group mb-2 form-floating">
                <input type="text" class="form-control" name="ngroup" id="ngroup">
                <label for="ngroup"><b>Tên nhóm mới</b></label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="checkauto" value="checked" id="hpcheck">
                <label class="form-check-label" for="hpcheck">
                    Tự động thêm User khi có User tham gia làm bài tập thuộc Contest
                </label>
            </div>
            </div>
        </div>
        <div class="row pt-1 pb-1 justify-content-center align-items-center" >
            <div class="col-sm-3">
                <button class="btn btn-success"  type="submit">Thêm nhóm mới</button>
            </div>
        </div>
        
    </form>
    
    <hr style="height:3px;border-width:1;color:red;background-color:green">    
    <h4 class="text-center">Danh sách nhóm</h4>
    <hr class="m-0 p-0">    

    <div class="row d-flex justify-content-center">
    <div class="col-auto">
    <table class="table table-hover table-bordered w-auto table-responsive">
    <thead>
      <tr class="thead-dark text-center small">
        <th class="align-middle">ID</th>
        <th class="align-middle" >Tên nhóm</th>
        <th class="align-middle" >Xóa nhóm</th>
        <th class="align-middle">Xóa/thêm tài khoản khỏi nhóm</th>
        {%if show%} <th class="align-middle">Người tạo</th> {%endif%}
      </tr>
    </thead>
    <tbody>
        {% for d in gr %}
        <tr class="ml-0 mr-0 p-0 small">
            <form method="post" action="{{url_for('admin_ql_groups')}}" class="m-0 p-0">
            <td class="text-center align-middle" ><b>{{d[0]}}</b></td>
            <td class="text-center align-middle"><b>{{d[1]}}</b></td>
            <td class="input-group">
                <input type="hidden" name="idgr" value={{d[0]}}>
                <input class="btn btn-primary btn-sm form-control" name="action"  type="submit" value="Xóa">
            </td>
            <td class="p-1 m-0 w-auto">
                <div class="input-group mb-2">
                    <input type="text" name="user" class="form-control">
                    <input class="btn btn-danger btn-sm" name="action" type="submit" value="Xóa User">
                    <input class="btn btn-success btn-sm" name="action" type="submit" value="Thêm User">
                </div>
                
            </td>
            </form>
            {%if show%}<td class="p-1 m-0 w-auto text-center">{{d[2]}}</td>{%endif%}
        </tr>
        {% endfor %}
    </tbody>
    </table>
    </div>
    </div>
    

{% endblock %}